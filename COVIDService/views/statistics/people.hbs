<div id="content-1" class="content shadow border rounded container-fluid mb-5">
    <div class="row pt-3 border-bottom">
        <div class="col-12 col-lg-8 h-100">
            <p id="product-name" class="title text-blue text-center text-md-left text-uppercase"
                style="font-size: 1.8rem; font-weight: bold;">Thống kê người liên quan Covid-19</p>
        </div>
        <div class="col-12 col-lg-4">
            <form id="filterby-form" class="form-inline" action="/manager/people/statistic">
                <div class="form-group mb-2">
                    <label for="filter-by"><i class="fas fa-calendar-alt"></i></label>
                    <select class="form-control shadow-none custom-select filterby mx-sm-2" id="filter-by"
                        aria-label="filter-by" name="filter_by">
                        <option class="py-1" value="day-current" data-filter="&filterby=(day:current)">Hôm nay</option>
                        <option class="py-1" value="week-current" data-filter="&filterby=(week:current)">Tuần này
                        </option>
                        <option class="py-1" value="month-current" data-filter="&filterby=(month:current)">Tháng này
                        </option>
                    </select>
                </div>
            </form>
        </div>
    </div>
    <!-- STATISTICS -->
    <!-- THỐNG KÊ NGƯỜI LIÊN QUAN -->
    <div class="row my-3 justify-content-between align-items-center flex-column-reverse flex-md-row">
        <div class="col-md-5 col-12">
            <div class="table-responsive-xl table-hover">
                <table class="table table-content border mb-0 menu">
                    <thead class="thead-light">
                        <tr>
                            <th scope="col d-flex align-items-center">#</th>
                            <th scope="col">Trạng thái</th>
                            <th scope="col" class="text-center">Tổng số người</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#if status}}
                        {{#each status}}
                            <tr class="section">
                                <th scope="row">{{sum @index 1}}</th>
                                <td class="status">
                                    {{this.trangthai}}
                                </td>
                                <td class="number text-center">
                                    {{this.soluong}}
                                </td>
                            </tr>
                        {{/each}}
                        <tr class="section total-row font-weight-bold">
                            <th scope="row" colspan="2">Tổng</th>
                            <td class="number-total text-center"></td>
                        </tr>
                        {{else}}
                            <h3 class="text-uppercase">Không có dữ liệu</h3>
                        {{/if}}
                    </tbody>
                </table>
            </div>
        </div>
        {{#if status}} 
            <div class="col-md-7 col-12 d-flex justify-content-center">
                <div id="people-chart" style="min-height: 350px;"></div>
            </div>
        {{/if}}
    </div>
</div>

{{#section 'script'}}
    {{#if status}}

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
        <script>
            google.charts.load('current', { 'packages': ['corechart'] });
            google.charts.setOnLoadCallback(drawChart);

            function drawChart() {
                var peopleData = google.visualization.arrayToDataTable([
                    ['Status', 'Amount'],
                    {{#each status}}
                        [{{this.trangthai}}, {{this.soluong}}]
                    {{/each}}
                ]);

                var options = {
                    title: 'Người liên quan Covid-19',
                    chartArea: {
                        // leave room for y-axis labels
                        width: '94%',
                    },
                    width: '100%',
                    height: '100%',
                    colors: ['#f57a75', '#BDD5EA', '#8be4ba','#49c6c5', '#3a59bf'],
                    animation: {
                        duration: 1000,
                        easing: 'out',
                    }
                };

                var chart = new google.visualization.PieChart(document.getElementById('people-chart'));
                chart.draw(peopleData, options);
            }    
        </script>
    {{/if}}
{{/section}}